<!DOCTYPE html>












  


<html class="theme-next gemini use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2"/>
<meta name="theme-color" content="#222"/>
























<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2"/>

<link rel="stylesheet" href="/css/main.css?v=7.1.1"/>


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=7.1.1">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=7.1.1">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=7.1.1">


  <link rel="mask-icon" href="/images/logo.svg?v=7.1.1" color="#222">







<script id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '',
    scheme: 'Gemini',
    version: '7.1.1',
    sidebar: {"position":"left","display":"post","offset":12,"onmobile":false,"dimmer":false},
    back2top: true,
    back2top_sidebar: false,
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta property="og:type" content="website">
<meta property="og:title" content="my blog!">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="my blog!">
<meta property="og:locale">
<meta property="article:author" content="哧溜">
<meta name="twitter:card" content="summary">





  
  
  <link rel="canonical" href="http://yoursite.com/"/>



<script id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>my blog!</title>
  












  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-title { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

<meta name="generator" content="Hexo 6.2.0"></head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">my blog!</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="Toggle navigation bar">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home menu-item-active">

    
    
    
      
    

    

    <a href="/" rel="section">&lt;i class&#x3D;&quot;menu-item-icon fa fa-fw fa-home&quot;&gt;&lt;&#x2F;i&gt; &lt;br&#x2F;&gt;Home</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">

    
    
    
      
    

    

    <a href="/archives/" rel="section">&lt;i class&#x3D;&quot;menu-item-icon fa fa-fw fa-archive&quot;&gt;&lt;&#x2F;i&gt; &lt;br&#x2F;&gt;Archives</a>

  </li>

      
      
    </ul>
  

  

  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
            

          
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2022/06/10/vue-router-%E8%B7%AF%E7%94%B1%E9%92%A9%E5%AD%90/"/>

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="哧溜"/>
      <meta itemprop="description" content=""/>
      <meta itemprop="image" content="/images/avatar.gif"/>
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="my blog!"/>
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2022/06/10/vue-router-%E8%B7%AF%E7%94%B1%E9%92%A9%E5%AD%90/" class="post-title-link" itemprop="url">vue-router 路由钩子</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2022-06-10 10:46:50 / Modified: 13:00:27" itemprop="dateCreated datePublished" datetime="2022-06-10T10:46:50+08:00">2022-06-10</time>
            

            
              

              
            
          </span>

          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="全局路由钩子"><a href="#全局路由钩子" class="headerlink" title="全局路由钩子"></a>全局路由钩子</h4><ul>
<li><code>router.beforeEach</code> 全局前置守卫 进入路由之前</li>
<li><code>router.beforeResolve</code> 全局解析守卫 在<code>beforeRouteEnter</code>调用之后凋也</li>
<li><code>router.afterEach </code> 全局后置钩子 进入路由之后</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// main.js</span></span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&#x27;./router&#x27;</span>;</span><br><span class="line">router.<span class="title function_">beforeEach</span>(<span class="function">(<span class="params">to, <span class="keyword">from</span>, next</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="title function_">next</span>();</span><br><span class="line">&#125;)</span><br><span class="line">router.<span class="title function_">beforeResolve</span>(<span class="function">(<span class="params">to, form, next</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="title function_">next</span>();</span><br><span class="line">&#125;)</span><br><span class="line">router.<span class="title function_">afterEach</span>(<span class="function">(<span class="params">to, <span class="keyword">from</span>, next</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;全局后置钩子&#x27;</span>);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h5 id="to-from-next参数"><a href="#to-from-next参数" class="headerlink" title="to,from,next参数"></a><code>to</code>,<code>from</code>,<code>next</code>参数</h5><p><code>to</code>: 将要进入的路由对象</p>
<p><code>from</code>：将要离开的路由对象</p>
<p><code>next:Function</code>进入路由，必须调用 <code>next()</code> </p>
<h4 id="路由独享守卫"><a href="#路由独享守卫" class="headerlink" title="路由独享守卫"></a>路由独享守卫</h4><ul>
<li><code>beforeEnter</code> 可以为某些路由单独配置守卫</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> [</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;/&#x27;</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;home&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>: login,</span><br><span class="line">    <span class="attr">beforeEnter</span>: <span class="function">(<span class="params">to, <span class="keyword">from</span>, next</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;即将进入路由&#x27;</span>);</span><br><span class="line">      <span class="title function_">next</span>();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<h4 id="组件内钩子"><a href="#组件内钩子" class="headerlink" title="组件内钩子"></a>组件内钩子</h4><ul>
<li><code>beforeRouteUpdate</code> 路由复用同一个组件时</li>
<li><code>beforeRouteEnter</code> 进入路由前</li>
<li><code>beforeRouteLeave</code> 离开当前路由</li>
</ul>
<p><code>beforeRouteEnter</code>组件内访问不到<code>this</code>因为钩子在组件实例还没被创建的时候调用，需要传一个回调给<code>next</code>来访问</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">beforeRouteEnter</span>(<span class="params">to, <span class="keyword">from</span>, next</span>)&#123;</span><br><span class="line">  <span class="title function_">next</span>(<span class="function"><span class="params">vm</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">//通过 `vm` 访问组件实例`this` 执行回调的时机在mounted后面，</span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>beforeRouteLeave</code> 导航离开该组件对应的路由时调用，eg: 禁止用户离开，或者在离开前做一些操作 清除定时器</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">beforeRouteLeave</span>(<span class="params">to, <span class="keyword">from</span>, next</span>)&#123;</span><br><span class="line">  <span class="keyword">if</span>(flag)&#123;</span><br><span class="line">    <span class="title function_">next</span>();</span><br><span class="line">  &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    <span class="title function_">next</span>(<span class="literal">false</span>); <span class="comment">//取消离开</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="完整路由导航解析流程"><a href="#完整路由导航解析流程" class="headerlink" title="完整路由导航解析流程"></a>完整路由导航解析流程</h4><ol>
<li>触发进入其他路由</li>
<li>调用要离开路由的组件守卫<code>beforeRouteLeave</code></li>
<li>调用全局前置守卫<code>beforeEach</code></li>
<li>在重用的组件里调用<code>beforeRouteUpdate</code></li>
<li>调用路由独享守卫<code>beforeEnter</code></li>
<li>解析异步路由组件</li>
<li>在将要进入的路由组件中调用<code>beforeRouteEnter</code></li>
<li>调用全局解析守卫<code>beforeResolve</code></li>
<li>导航被确认</li>
<li>调用全局后置钩子的<code>afterEach</code></li>
<li>触发DOM更新<code>mounted</code></li>
<li>执行<code>beforeRouteEnter</code>守卫中传给<code>next</code>的回调函数</li>
</ol>
<h4 id="触发钩子的完整顺序"><a href="#触发钩子的完整顺序" class="headerlink" title="触发钩子的完整顺序"></a>触发钩子的完整顺序</h4><p>将路由导航、<code>keep-alvie</code>、和组件生命周期钩子结合起来，触发顺序，假设是从a组件离开，第一次进入b组件</p>
<ol>
<li><code>beforeRouteLeave</code>路由组件的组件离开路由前钩子，可取消路由离开</li>
<li><code>beforeEach</code>路由全局前置守卫，可用于登录验证、全局路由loading等</li>
<li><code>beforeEnter</code>路由独享守卫</li>
<li><code>beforeRouteEnter</code>路由组件的组件进入路由前钩子</li>
<li><code>beforeResolve</code>路由全局解析守卫</li>
<li><code>afterEach</code>路由全局后置钩子</li>
<li><code>beforeCreate</code>组件生命周期，不能访问<code>this</code></li>
<li><code>created</code>组件生命周期，可以访问<code>this</code>，不能访问dom</li>
<li><code>beforeMount</code>组件生命周期</li>
<li><code>deactivated</code>离开缓存组件a，或者触发a的<code>beforeDestory</code>和<code>destroyed</code>组件销毁钩子</li>
<li><code>mounted</code>访问&#x2F;操作dom</li>
<li><code>activated</code>进入缓存组件，进入a的嵌套子组件</li>
<li>执行<code>beforeRouteEnter</code>回调函数<code>next</code></li>
</ol>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2022/06/08/%E6%95%B0%E6%8D%AE%E5%88%86%E7%B1%BB/"/>

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="哧溜"/>
      <meta itemprop="description" content=""/>
      <meta itemprop="image" content="/images/avatar.gif"/>
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="my blog!"/>
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2022/06/08/%E6%95%B0%E6%8D%AE%E5%88%86%E7%B1%BB/" class="post-title-link" itemprop="url">数据分类</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2022-06-08 23:35:32 / Modified: 23:50:15" itemprop="dateCreated datePublished" datetime="2022-06-08T23:35:32+08:00">2022-06-08</time>
            

            
              

              
            
          </span>

          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="数据分类"><a href="#数据分类" class="headerlink" title="数据分类"></a>数据分类</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">filterRepeatDetails</span> = (<span class="params">data, p1</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">let</span> list = [...data];</span><br><span class="line">  <span class="keyword">let</span> res = [];</span><br><span class="line">  <span class="keyword">while</span>(list.<span class="property">length</span> != <span class="number">0</span>)&#123;</span><br><span class="line">    <span class="keyword">let</span> last = list.<span class="title function_">shift</span>();</span><br><span class="line">    <span class="keyword">let</span> arr = [last];</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>;i&lt;list.<span class="property">length</span>;i++)&#123;</span><br><span class="line">      <span class="keyword">if</span>(list[i][p1] === last[p1])&#123;</span><br><span class="line">        arr = arr.<span class="title function_">concat</span>(list.<span class="title function_">splice</span>(i, <span class="number">1</span>))</span><br><span class="line">        i--;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    res.<span class="title function_">push</span>(arr)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> res</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2022/06/06/reduce-%E5%BE%AA%E7%8E%AF-%E5%BC%82%E6%AD%A5/"/>

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="哧溜"/>
      <meta itemprop="description" content=""/>
      <meta itemprop="image" content="/images/avatar.gif"/>
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="my blog!"/>
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2022/06/06/reduce-%E5%BE%AA%E7%8E%AF-%E5%BC%82%E6%AD%A5/" class="post-title-link" itemprop="url">reduce 循环+异步</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2022-06-06 16:36:55 / Modified: 16:48:27" itemprop="dateCreated datePublished" datetime="2022-06-06T16:36:55+08:00">2022-06-06</time>
            

            
              

              
            
          </span>

          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>####<strong>reduce</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">testPromise</span>(<span class="params">time</span>)&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve,reject</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`Processing <span class="subst">$&#123;time&#125;</span>`</span>)</span><br><span class="line">      <span class="title function_">resolve</span>(time)</span><br><span class="line">    &#125;, time)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> result = [<span class="number">3000</span>,<span class="number">2000</span>,<span class="number">1000</span>, <span class="number">4000</span>].<span class="title function_">reduce</span>(<span class="function">(<span class="params">acc,nextId</span>)=&gt;</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> acc.<span class="title function_">then</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">testPromise</span>(nextId)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;, <span class="title class_">Promise</span>.<span class="title function_">resolve</span>())</span><br><span class="line"></span><br><span class="line">result.<span class="title function_">then</span>(<span class="function"><span class="params">e</span>=&gt;</span>&#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;All Promises Resolved !!✨&quot;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>




          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2021/06/10/typescript/"/>

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="哧溜"/>
      <meta itemprop="description" content=""/>
      <meta itemprop="image" content="/images/avatar.gif"/>
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="my blog!"/>
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2021/06/10/typescript/" class="post-title-link" itemprop="url">typescript</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2021-06-10 12:21:18" itemprop="dateCreated datePublished" datetime="2021-06-10T12:21:18+08:00">2021-06-10</time>
            

            
          </span>

          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            
          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2021/03/12/24-%E4%B8%AA-ES6-%E4%BB%A3%E7%A0%81%E6%AE%B5/"/>

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="哧溜"/>
      <meta itemprop="description" content=""/>
      <meta itemprop="image" content="/images/avatar.gif"/>
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="my blog!"/>
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2021/03/12/24-%E4%B8%AA-ES6-%E4%BB%A3%E7%A0%81%E6%AE%B5/" class="post-title-link" itemprop="url">24 个 ES6 代码段</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2021-03-12 22:50:39" itemprop="dateCreated datePublished" datetime="2021-03-12T22:50:39+08:00">2021-03-12</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2021-03-21 23:22:10" itemprop="dateModified" datetime="2021-03-21T23:22:10+08:00">2021-03-21</time>
              
            
          </span>

          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="1-如何隐藏所有指定元素？"><a href="#1-如何隐藏所有指定元素？" class="headerlink" title="1.如何隐藏所有指定元素？"></a><strong>1.如何隐藏所有指定元素？</strong></h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">hide</span> = (<span class="params">...el</span>) =&gt; [...el].<span class="title function_">forEach</span>(<span class="function"><span class="params">e</span> =&gt;</span> (e.<span class="property">style</span>.<span class="property">display</span> = <span class="string">&#x27;none&#x27;</span>));</span><br><span class="line"><span class="comment">// Example</span></span><br><span class="line"><span class="title function_">hide</span>(<span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;img&#x27;</span>)); <span class="comment">// 隐藏页面上的所有img元素</span></span><br></pre></td></tr></table></figure>

<h4 id="2-如何确认元素是否具有指定的类？"><a href="#2-如何确认元素是否具有指定的类？" class="headerlink" title="2.如何确认元素是否具有指定的类？"></a><strong>2.如何确认元素是否具有指定的类？</strong></h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">hasClass</span> = (<span class="params">el, className</span>) =&gt; el.<span class="property">classList</span>.<span class="title function_">contains</span>(className);</span><br><span class="line"><span class="comment">// Example</span></span><br><span class="line"><span class="title function_">hasClass</span>(<span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;p.special&#x27;</span>, <span class="string">&#x27;special&#x27;</span>)) <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<h4 id="3-如何切换元素的类？"><a href="#3-如何切换元素的类？" class="headerlink" title="3.如何切换元素的类？"></a><strong>3.如何切换元素的类？</strong></h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">toggleClass</span> = (<span class="params">el, className</span>) =&gt; el.<span class="property">classList</span>.<span class="title function_">toggle</span>(className);</span><br><span class="line"><span class="comment">// Example</span></span><br><span class="line"><span class="title function_">toggleClass</span>(<span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;p.special&#x27;</span>), <span class="string">&#x27;special&#x27;</span>);</span><br><span class="line"><span class="comment">// 该段不再有 &#x27;special&#x27; 类</span></span><br></pre></td></tr></table></figure>

<h4 id="4-如何获取当前页面的滚动位置？"><a href="#4-如何获取当前页面的滚动位置？" class="headerlink" title="4.如何获取当前页面的滚动位置？"></a><strong>4.如何获取当前页面的滚动位置？</strong></h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">getScrollPosition</span> = (<span class="params">el = <span class="variable language_">window</span></span>) =&gt; (&#123;</span><br><span class="line">  <span class="attr">x</span>: el.<span class="property">pageXOffset</span> !== <span class="literal">undefined</span> ? el.<span class="property">pageXOffset</span> : el.<span class="property">scrollLeft</span>,</span><br><span class="line">  <span class="attr">y</span>: el.<span class="property">pageYOffset</span> !== <span class="literal">undefined</span> ? el.<span class="property">pageYOffset</span> : el.<span class="property">scrollTop</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// Example</span></span><br><span class="line"><span class="title function_">getScrollPosition</span>(); <span class="comment">// &#123;x: 0, y:200&#125;</span></span><br></pre></td></tr></table></figure>

<h4 id="5-如何平滑滚动到页面顶部？"><a href="#5-如何平滑滚动到页面顶部？" class="headerlink" title="5.如何平滑滚动到页面顶部？"></a><strong>5.如何平滑滚动到页面顶部？</strong></h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">scrollToTop</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> c = <span class="variable language_">document</span>.<span class="property">documentElement</span>.<span class="property">scrollTop</span> || <span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">scrollTop</span>;</span><br><span class="line">  <span class="keyword">if</span> ( c &gt; <span class="number">0</span>)&#123;</span><br><span class="line">    <span class="variable language_">window</span>.<span class="title function_">requestAnimationFrame</span>(scrollToTop);</span><br><span class="line">    <span class="variable language_">window</span>.<span class="title function_">scrollTo</span>(<span class="number">0</span>, c - c / <span class="number">8</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// example</span></span><br><span class="line"><span class="title function_">scrollToTop</span>();</span><br></pre></td></tr></table></figure>

<h4 id="如何确认父元素包含子元素？"><a href="#如何确认父元素包含子元素？" class="headerlink" title="如何确认父元素包含子元素？"></a><strong>如何确认父元素包含子元素？</strong></h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">elementContains</span> = (<span class="params">parent, child</span>) =&gt; parent !== child &amp;&amp; parent.<span class="title function_">contains</span>(child);</span><br><span class="line"><span class="comment">// example</span></span><br><span class="line"><span class="title function_">elementContains</span>(<span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;head&#x27;</span>), <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;title&#x27;</span>));</span><br><span class="line"><span class="comment">// true</span></span><br><span class="line"><span class="title function_">elementContains</span>(<span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;body&#x27;</span>), <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;body&#x27;</span>));</span><br><span class="line"><span class="comment">// false</span></span><br></pre></td></tr></table></figure>

<h4 id="如何确认自定元素是否在视口可见？"><a href="#如何确认自定元素是否在视口可见？" class="headerlink" title="如何确认自定元素是否在视口可见？"></a><strong>如何确认自定元素是否在视口可见？</strong></h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">elementIsVisibleInViewport</span> = (<span class="params">el, partiallyVisible = <span class="literal">false</span></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; top, left, bottom, right &#125; = el.<span class="title function_">getBoundingClientRect</span>();</span><br><span class="line">  <span class="keyword">const</span> &#123; innerHeight, innerWidth &#125; = <span class="variable language_">window</span>;</span><br><span class="line">  <span class="keyword">return</span> partiallyVisible ? ((top &gt; <span class="number">0</span> &amp;&amp; top &lt; innerHeight) || (bottom &gt; <span class="number">0</span> &amp;&amp; bottom &lt; innerHeight)) &amp;&amp; ((left &gt; <span class="number">0</span> &amp;&amp; left &lt; innerWidth) || (right &gt; <span class="number">0</span> &amp;&amp; right &lt; innerWidth)) : top &gt;= <span class="number">0</span> &amp;&amp; left &gt;= <span class="number">0</span> &amp;&amp; bottom &lt;= innerHeight &amp;&amp; right &lt;= innerHeight;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// exmaple</span></span><br><span class="line"><span class="title function_">elementIsVisibleInViewport</span>(el); <span class="comment">// (不完全可见) </span></span><br><span class="line"><span class="title function_">elementIsVisibleInViewport</span>(el, <span class="literal">true</span>); <span class="comment">// (部分可见)</span></span><br></pre></td></tr></table></figure>

<h4 id="如何获取一个元素内的所有图像？"><a href="#如何获取一个元素内的所有图像？" class="headerlink" title="如何获取一个元素内的所有图像？"></a><strong>如何获取一个元素内的所有图像？</strong></h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">getImages</span> = (<span class="params">el, includeDuplicates = <span class="literal">false</span></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> images = [...el.<span class="title function_">getElementsByTagName</span>(<span class="string">&#x27;img&#x27;</span>)].<span class="title function_">map</span>(<span class="function"><span class="params">img</span> =&gt;</span> img.<span class="title function_">getAttribute</span>(<span class="string">&#x27;src&#x27;</span>));</span><br><span class="line">  <span class="keyword">return</span> includeDuplicates ? images : [...<span class="keyword">new</span> <span class="title class_">Set</span>(images)];</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// example</span></span><br><span class="line"><span class="title function_">getImages</span>(<span class="variable language_">document</span>, <span class="literal">true</span>); <span class="comment">// [&#x27;image1.jpg&#x27;, &#x27;image2.png&#x27;, &#x27;image1.png&#x27;, &#x27;...&#x27;] </span></span><br><span class="line"><span class="title function_">getImages</span>(<span class="variable language_">document</span>, <span class="literal">false</span>); <span class="comment">// [&#x27;image1.jpg&#x27;, &#x27;image2.png&#x27;, &#x27;...&#x27;]</span></span><br></pre></td></tr></table></figure>

<h4 id="如何分辨设备是否是移动设备还是桌面设备？"><a href="#如何分辨设备是否是移动设备还是桌面设备？" class="headerlink" title="如何分辨设备是否是移动设备还是桌面设备？"></a><strong>如何分辨设备是否是移动设备还是桌面设备？</strong></h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">detectDeviceType</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">	<span class="regexp">/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i</span>.<span class="title function_">test</span>(navigator.<span class="property">userAgent</span>) ? <span class="string">&#x27;Mobile&#x27;</span> : <span class="string">&#x27;Desktop&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//exmaple</span></span><br><span class="line"><span class="title function_">detectDeviceType</span>();</span><br></pre></td></tr></table></figure>

<h4 id="如何获取当前的URL？"><a href="#如何获取当前的URL？" class="headerlink" title="如何获取当前的URL？"></a><strong>如何获取当前的<code>URL</code>？</strong></h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">currentURL</span> = (<span class="params"></span>) =&gt; <span class="variable language_">window</span>.<span class="property">location</span>.<span class="property">href</span>;</span><br><span class="line"><span class="comment">// example</span></span><br><span class="line"><span class="title function_">currentURL</span>();</span><br></pre></td></tr></table></figure>

<h4 id="如何创建一个包含当前URL参数的对象？"><a href="#如何创建一个包含当前URL参数的对象？" class="headerlink" title="如何创建一个包含当前URL参数的对象？"></a><strong>如何创建一个包含当前<code>URL</code>参数的对象？</strong></h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">getURLParameters</span> = url =&gt; </span><br><span class="line">	(url.<span class="title function_">match</span>(<span class="regexp">/([^?=&amp;]+)(=([^&amp;]*))/g</span>) || []).<span class="title function_">reduce</span>(</span><br><span class="line">  	<span class="function">(<span class="params">a, v</span>) =&gt;</span> ((a[v.<span class="title function_">slice</span>(<span class="number">0</span>, v.<span class="title function_">indexOf</span>(<span class="string">&#x27;=&#x27;</span>))] = v.<span class="title function_">slice</span>(v.<span class="title function_">indexOf</span>(<span class="string">&#x27;=&#x27;</span>) + <span class="number">1</span>)), a),</span><br><span class="line">    &#123;&#125;</span><br><span class="line">  );</span><br><span class="line"><span class="comment">// Examples </span></span><br><span class="line"><span class="title function_">getURLParameters</span>(<span class="string">&#x27;http://url.com/page?n=Adam&amp;s;=Smith&#x27;</span>); </span><br><span class="line"><span class="comment">// &#123;n: &#x27;Adam&#x27;, s: &#x27;Smith&#x27;&#125; </span></span><br><span class="line"><span class="title function_">getURLParameters</span>(<span class="string">&#x27;google.com&#x27;</span>); <span class="comment">// &#123;&#125;</span></span><br></pre></td></tr></table></figure>

<h4 id="如何将一组表单元素编码为一个对象"><a href="#如何将一组表单元素编码为一个对象" class="headerlink" title="如何将一组表单元素编码为一个对象?"></a><strong>如何将一组表单元素编码为一个对象?</strong></h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">formToObject</span> = form =&gt; </span><br><span class="line">  <span class="title class_">Array</span>.<span class="title function_">from</span>(<span class="keyword">new</span> <span class="title class_">FormData</span>(form)).<span class="title function_">reduce</span>(</span><br><span class="line">  	<span class="function">(<span class="params">acc, [key, value]</span>) =&gt;</span> (&#123;</span><br><span class="line">      ...acc,</span><br><span class="line">      [key]: value</span><br><span class="line">    &#125;),</span><br><span class="line">    &#123;&#125;</span><br><span class="line">  );</span><br><span class="line"><span class="comment">// example</span></span><br><span class="line"><span class="title function_">formToObject</span>(<span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;#form&#x27;</span>)); </span><br><span class="line"><span class="comment">// &#123; email: &#x27;test@email.com&#x27;, name: &#x27;Test Name&#x27; &#125;</span></span><br></pre></td></tr></table></figure>

<h4 id="如何从对象中检索给定选择器指示的一组属性？"><a href="#如何从对象中检索给定选择器指示的一组属性？" class="headerlink" title="如何从对象中检索给定选择器指示的一组属性？"></a><strong>如何从对象中检索给定选择器指示的一组属性？</strong></h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="如何在等待一定时间后调用提供的函数（单位毫秒）"><a href="#如何在等待一定时间后调用提供的函数（单位毫秒）" class="headerlink" title="如何在等待一定时间后调用提供的函数（单位毫秒）?"></a><strong>如何在等待一定时间后调用提供的函数（单位毫秒）?</strong></h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">delay</span> = (<span class="params">fn, wait, ...args</span>) =&gt; <span class="built_in">setTimeout</span>(fn, wait, ...args);</span><br><span class="line"><span class="title function_">delay</span>(</span><br><span class="line">	<span class="keyword">function</span>(<span class="params">text</span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(text);</span><br><span class="line">  &#125;, <span class="number">1000</span>, <span class="string">&#x27;later&#x27;</span></span><br><span class="line">)</span><br><span class="line"><span class="comment">// 一秒后记录 &#x27;later&#x27;</span></span><br></pre></td></tr></table></figure>


          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2021/03/11/js%E5%B9%B6%E9%9B%86%E3%80%81%E4%BA%A4%E9%9B%86%E3%80%81%E5%B7%AE%E9%9B%86/"/>

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="哧溜"/>
      <meta itemprop="description" content=""/>
      <meta itemprop="image" content="/images/avatar.gif"/>
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="my blog!"/>
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2021/03/11/js%E5%B9%B6%E9%9B%86%E3%80%81%E4%BA%A4%E9%9B%86%E3%80%81%E5%B7%AE%E9%9B%86/" class="post-title-link" itemprop="url">js并集、交集、差集</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2021-03-11 00:44:50 / Modified: 01:54:49" itemprop="dateCreated datePublished" datetime="2021-03-11T00:44:50+08:00">2021-03-11</time>
            

            
              

              
            
          </span>

          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="ES7-amp-Array-prototype-includes"><a href="#ES7-amp-Array-prototype-includes" class="headerlink" title="ES7&amp;Array.prototype.includes"></a><strong><code>ES7</code>&amp;<code>Array.prototype.includes</code></strong></h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 并集</span></span><br><span class="line"><span class="keyword">let</span> union = <span class="keyword">function</span>(<span class="params">a,b</span>)&#123;</span><br><span class="line">	<span class="keyword">return</span> [...a,...(b.<span class="title function_">filter</span>(<span class="function"><span class="params">v</span>=&gt;</span>!a.<span class="title function_">includes</span>(v)))]</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 交集</span></span><br><span class="line"><span class="keyword">let</span> intersection = <span class="keyword">function</span>(<span class="params">a,b</span>)&#123;</span><br><span class="line">	<span class="keyword">return</span> [...(a.<span class="title function_">filter</span>(<span class="function"><span class="params">v</span>=&gt;</span>b.<span class="title function_">includes</span>(v)))]</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 差集</span></span><br><span class="line"><span class="keyword">let</span> difference = <span class="keyword">function</span>(<span class="params">a,b</span>)&#123;</span><br><span class="line">  <span class="keyword">return</span> [...a,...b].<span class="title function_">filter</span>(<span class="function"><span class="params">v</span>=&gt;</span>!a.<span class="title function_">includes</span>(v)||!b.<span class="title function_">includes</span>(v))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="ES6-amp-Set"><a href="#ES6-amp-Set" class="headerlink" title="ES6&amp;Set"></a><strong><code>ES6</code>&amp;<code>Set</code></strong></h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 并集</span></span><br><span class="line"><span class="keyword">let</span> union = <span class="keyword">function</span>(<span class="params">a,b</span>)&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title class_">Array</span>.<span class="title function_">from</span>(<span class="keyword">new</span> <span class="title class_">Set</span>([...a,...b]))</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 交集</span></span><br><span class="line"><span class="keyword">let</span> intersection = <span class="keyword">function</span>(<span class="params">a,b</span>)&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title class_">Array</span>.<span class="title function_">from</span>(a.<span class="title function_">filter</span>(<span class="function"><span class="params">v</span>=&gt;</span>(<span class="keyword">new</span> <span class="title class_">Set</span>(b)).<span class="title function_">has</span>(v)))</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 差集</span></span><br><span class="line"><span class="keyword">let</span> difference = <span class="keyword">function</span>(<span class="params">a,b</span>)&#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="title class_">Array</span>.<span class="title function_">from</span>([...a,...b].<span class="title function_">filter</span>(<span class="function"><span class="params">v</span>=&gt;</span>!(<span class="keyword">new</span> <span class="title class_">Set</span>(a)).<span class="title function_">has</span>(v)||!(<span class="keyword">new</span> <span class="title class_">Set</span>(b)).<span class="title function_">has</span>(v)))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="ES5-amp-indexOf"><a href="#ES5-amp-indexOf" class="headerlink" title="ES5&amp;indexOf"></a><strong><code>ES5</code>&amp;<code>indexOf</code></strong></h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 并集</span></span><br><span class="line"><span class="keyword">var</span> union = <span class="keyword">function</span>(<span class="params">a,b</span>)&#123;</span><br><span class="line">  <span class="keyword">return</span> a.<span class="title function_">concat</span>(b.<span class="title function_">filter</span>(<span class="keyword">function</span>(<span class="params">v</span>)&#123;</span><br><span class="line">  	<span class="keyword">return</span> a.<span class="title function_">indexOf</span>(v) === -<span class="number">1</span></span><br><span class="line">	&#125;))</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 交集</span></span><br><span class="line"><span class="keyword">var</span> intersection = <span class="keyword">function</span>(<span class="params">a,b</span>)&#123;</span><br><span class="line">	<span class="keyword">return</span> a.<span class="title function_">filter</span>(<span class="keyword">function</span>(<span class="params">v</span>)&#123;</span><br><span class="line">  	<span class="keyword">return</span> b.<span class="title function_">indexOf</span>(v) &gt; -<span class="number">1</span></span><br><span class="line">	&#125;)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 差集</span></span><br><span class="line"><span class="keyword">var</span> difference = <span class="keyword">function</span>(<span class="params">a,b</span>)&#123;</span><br><span class="line">  <span class="keyword">return</span> a.<span class="title function_">concat</span>(b).<span class="title function_">filter</span>(<span class="keyword">function</span>(<span class="params">v</span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> a.<span class="title function_">indexOf</span>(v) === -<span class="number">1</span> || b.<span class="title function_">indexOf</span>(v) === -<span class="number">1</span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>


          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2021/03/04/vue-%E9%9D%A2%E8%AF%95%E9%A2%98%EF%BC%88%E8%BD%AC%E8%BD%BD%EF%BC%89/"/>

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="哧溜"/>
      <meta itemprop="description" content=""/>
      <meta itemprop="image" content="/images/avatar.gif"/>
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="my blog!"/>
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2021/03/04/vue-%E9%9D%A2%E8%AF%95%E9%A2%98%EF%BC%88%E8%BD%AC%E8%BD%BD%EF%BC%89/" class="post-title-link" itemprop="url">vue 面试题（转载）</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2021-03-04 14:55:46" itemprop="dateCreated datePublished" datetime="2021-03-04T14:55:46+08:00">2021-03-04</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2021-03-09 01:48:40" itemprop="dateModified" datetime="2021-03-09T01:48:40+08:00">2021-03-09</time>
              
            
          </span>

          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>####<strong>1.说说你对<code>SPA</code>单页页面的理解，它的优缺点分别是什么？</strong></p>
<p><code>SPA（single-page application）</code>仅在Web页面初始化时加载相应的<code>HTML</code>、<code>JavaScript</code>和<code>CSS</code>。一旦页面加载完成，<code>SPA</code>不会因为用户操作而进行页面的重新加载和跳转；取而代之的是利用路由机制实现<code>HTML</code>内容的转换，<code>UI</code>与用户的交互，避免页面的重新加载。</p>
<h5 id="优点"><a href="#优点" class="headerlink" title="优点"></a>优点</h5><ul>
<li>用户体验好、快，内容的改变不需要重新加载整个页面，避免了不必要的跳转和重复渲染；</li>
<li>基于上面一点，<code>SPA</code>相对对服务器压力小；</li>
<li>前后端职责分离，架构清晰，前端进行交互逻辑，后端负责数据处理；</li>
</ul>
<h5 id="缺点"><a href="#缺点" class="headerlink" title="缺点"></a>缺点</h5><ul>
<li>初次加载耗时多：为实现单页<code>Web</code>应用功能及现实效果，需要在加载页面的时候将<code>Java script</code>、<code>CSS</code>统一加载，部分页面按需加载；</li>
<li>前进后退路由管理：由于单页应用在一个页面中现实所有内容，所以不能使用浏览器的前进后退功能，所有的页面切换需要自己建立堆栈管理；</li>
<li><code>SEO</code>难度较大：由于所有的内容都在一个页面中动态替换显示，所以在<code>SEO</code>上有着天然的弱势。</li>
</ul>
<h4 id="2-怎么理解Vue的单向数据流"><a href="#2-怎么理解Vue的单向数据流" class="headerlink" title="2.怎么理解Vue的单向数据流"></a><strong>2.怎么理解<code>Vue</code>的单向数据流</strong></h4><p>所有的<code>prop</code>都是使得其父子<code>prop</code>之间形成了一个<strong>单向下行绑定：</strong>父级<code>prop</code>的更新会向下流动到子组件中，但是反过来则不行。这样可以防止从子组件意外改变父级组件的状态，从而导致应用的数据流向难以理解。</p>
<p>额外的，每次父级组件发生更新时，子组件中所有的<code>prop</code>都会刷新到最新的值。这意味着你不应该在一个子组件内部改变<code>prop</code>。如果你这样做了，<code>Vue</code>会在浏览器的控制台中发出警告。子组件想修改时，只能通过<code>$emit</code>派发出一个自定义事件，父组件接收到后，由父组件修改。</p>
<p>有两种常见的试图改变一个<code>prop</code>的情形：</p>
<ul>
<li><strong>这个<code>prop</code>用来传递一个初始值；这个子组件接下来希望将其作为一个本地的<code>prop</code>数据来使用</strong>。这种情况下，最好定义一个本地的<code>data</code>属性并将这个<code>prop</code>用作其初始值</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">props</span>: [<span class="string">&#x27;initialCounter&#x27;</span>],</span><br><span class="line"><span class="attr">data</span>: <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="attr">counter</span>: <span class="variable language_">this</span>.<span class="property">initialCounter</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>

<ul>
<li>这个<code>prop</code>以一种原始的值传入且需要进行转换。在这种情况下，最好使用这个<code>prop</code>的值来定义一个计算属性</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">props</span>: [<span class="string">&#x27;size&#x27;</span>],</span><br><span class="line"><span class="attr">computed</span>: &#123;</span><br><span class="line">  <span class="attr">normalizedSize</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">size</span>.<span class="title function_">trim</span>().<span class="title function_">toLowerCase</span>()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>####<strong>3.computed和watch的区别和运用的场景</strong></p>
<p><code>computed</code>：是计算属性，依赖其他属性值，并且<code>computed</code>的值有缓存，只有它依赖的属性值发生改变，下一次获取<code>computed</code>的值时才会 重新计算<code>computed</code>的值；</p>
<p><code>watch</code>：更多的是「观察」的作用，类似于某些数据的监听回调，每当监听的数据发生变化时都会执行回调进行后续的操作；</p>
<p><strong>运用场景</strong></p>
<ul>
<li>当我们需要进行数值计算，并且依赖于其他数据时，应该使用<code>computed</code>，因为可以利用<code>computed</code>的缓存特性，避免每次获取值时，都要重新计算;</li>
<li>当我们需要在数据变化时执行异步或开销较大的操作时，应该使用<code>watch</code>，使用<code>watch</code>选项允许我们执行异步操作（访问一个API）,限制我们执行该操作的频率，并在我们得到最终结果前，设置中间状态。这些都是计算属性无法做到的。</li>
</ul>
<h4 id="4-直接给一个数组项赋值，Vue能检测到变化吗？"><a href="#4-直接给一个数组项赋值，Vue能检测到变化吗？" class="headerlink" title="4.直接给一个数组项赋值，Vue能检测到变化吗？"></a><strong>4.直接给一个数组项赋值，<code>Vue</code>能检测到变化吗？</strong></h4><p>由于<code>javascript</code>的限制，<code>Vue</code>不能检测到以下数组的变动：</p>
<ul>
<li>当你利用索引直接设置一个数组项时，例如：<code>vm.items[indexOfItem] = newValue</code></li>
<li>当你修改数组长度时，例如：<code>vm.items.length = newLength</code></li>
</ul>
<p>为了解决第一个问题，<code>Vue</code>提供了以下操作方法</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Vue.set</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">set</span>(vm.<span class="property">items</span>, indexOfItem, newValue)</span><br><span class="line"><span class="comment">// vm.$set, Vue.set的一个别名</span></span><br><span class="line">vm.$set(vm.<span class="property">items</span>, indexOfItem, newValue)</span><br><span class="line"><span class="comment">// Array.prototype.splice</span></span><br><span class="line">vm.<span class="property">items</span>.<span class="title function_">splice</span>(itemOfItem, <span class="number">1</span>, newValue)</span><br></pre></td></tr></table></figure>

<p>为了解决第二个问题，<code>Vue</code>提供了以下操作方法</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Array.prototype.splice</span></span><br><span class="line">vm.<span class="property">items</span>.<span class="title function_">splice</span>(newLength)</span><br></pre></td></tr></table></figure>

<h4 id="5-Vue的父组件和子组件生命周期钩子函数执行顺序"><a href="#5-Vue的父组件和子组件生命周期钩子函数执行顺序" class="headerlink" title="5.Vue的父组件和子组件生命周期钩子函数执行顺序"></a><strong>5.<code>Vue</code>的父组件和子组件生命周期钩子函数执行顺序</strong></h4><p><code>Vue</code>的父组件和子组件生命周期钩子函数执行顺序可以归类为以下4部分：</p>
<ul>
<li><p>加载渲染过程</p>
<p>父<code>beforeCreate</code> -&gt; 父<code>created</code> -&gt; 父<code>beforeMount</code> -&gt; 子<code>beforeCreate</code> -&gt; 子<code>created</code> -&gt; </p>
<p>子<code>beforeMount</code> -&gt; 子<code>mounted</code> -&gt; 父<code>mounted</code></p>
</li>
<li><p>子组件更新过程</p>
<p>父<code>beforeUpdate</code> -&gt; 子<code>beforeUpdate</code> -&gt; 子<code>updated</code> -&gt; 父<code>updated</code></p>
</li>
<li><p>父组件更新过程</p>
<p>父<code>beforeUpdate</code> -&gt; 父<code>updated</code></p>
</li>
<li><p>销毁过程</p>
<p>父<code>beforeDestroy</code> -&gt; 子<code>beforeDestroy</code> -&gt; 子<code>destroyed</code> -&gt; 父<code>destroyed</code></p>
</li>
</ul>
<h4 id="6-在哪个生命周期内调用异步请求"><a href="#6-在哪个生命周期内调用异步请求" class="headerlink" title="6.在哪个生命周期内调用异步请求?"></a><strong>6.在哪个生命周期内调用异步请求?</strong></h4><p>可以在钩子函数<code>created</code>、<code>beforeMount</code>、<code>mounted</code>中进行调用，因为在这三个钩子函数中，<code>data</code>已经创建，可以将服务端返回的数据进行赋值。但是推荐在<code>created</code>钩子函数中调用异步请求，因为在<code>created</code>钩子函数中调用异步请求有以下优点：</p>
<ul>
<li>能更快获取到服务端数据，减少页面<code>loading</code>事件；</li>
<li><code>ssr</code>不支持<code>beforeMount</code>、<code>mounted</code>钩子函数，所以放在<code>created</code>中有助于一致性；</li>
</ul>
<h4 id="7-在什么阶段才能访问操作DOM"><a href="#7-在什么阶段才能访问操作DOM" class="headerlink" title="7.在什么阶段才能访问操作DOM?"></a><strong>7.在什么阶段才能访问操作<code>DOM</code>?</strong></h4><p>在钩子函数<code>mounted</code>被调用前，<code>Vue</code>已经将编译好的模版挂载到页面上，所以在<code>mounted</code>中可以访问操作<code>DOM</code>。</p>
<h4 id="8-父组件可以监听子组件的生命周期吗"><a href="#8-父组件可以监听子组件的生命周期吗" class="headerlink" title="8.父组件可以监听子组件的生命周期吗?"></a><strong>8.父组件可以监听子组件的生命周期吗?</strong></h4><p>比如有父组件<code>Parent</code>和子组件<code>Child</code>，如果父组件监听到子组件挂载<code>mounted</code>就做一些逻辑处理，可以通过以下写法实现：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Parent.vue</span></span><br><span class="line">&lt;<span class="title class_">Child</span> @mounted=<span class="string">&quot;doSomething&quot;</span>/&gt;</span><br><span class="line">  </span><br><span class="line"><span class="comment">// Child.vue</span></span><br><span class="line"><span class="title function_">mounted</span>(<span class="params"></span>)&#123;</span><br><span class="line">	<span class="variable language_">this</span>.$emit(<span class="string">&quot;mounted&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>以上需要手动通过<code>$emit</code>触发父组件的事件，更简单的方式可以在父组件引用子组件时通过<code>@hook</code>来监听即可，如下所示：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Parent.vue</span></span><br><span class="line">&lt;<span class="title class_">Child</span> @<span class="attr">hook</span>:mounted=<span class="string">&quot;doSomething&quot;</span>/&gt;</span><br><span class="line">  </span><br><span class="line"><span class="title function_">doSomething</span>(<span class="params"></span>)&#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;父组件监听到 mounted 钩子函数 ...&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line">  </span><br><span class="line"><span class="comment">// Child.vue</span></span><br><span class="line"><span class="title function_">mounted</span>(<span class="params"></span>)&#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;子组件触发 mounted 钩子函数 ...&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 以上输出顺序为：</span></span><br><span class="line"><span class="comment">// 子组件触发 mounted 钩子函数 ...</span></span><br><span class="line"><span class="comment">// 父组件监听到 mounted 钩子函数 ... </span></span><br></pre></td></tr></table></figure>

<p><code>@hook</code>方法不仅可以监听<code>mounted</code>，其他生命周期事件，例如：<code>created</code>，<code>updated</code>等都可以监听。</p>
<h4 id="9-谈谈你对keep-alive的了解"><a href="#9-谈谈你对keep-alive的了解" class="headerlink" title="9.谈谈你对keep-alive的了解"></a><strong>9.谈谈你对<code>keep-alive</code>的了解</strong></h4><p><code>keep-alive</code>是<code>Vue</code>内置的一个组件，可以是包含的组件保留状态，避免重新渲染，其有以下特性：</p>
<ul>
<li>一般结合路由和动态组件一起使用，用于缓存组件；</li>
<li>提供<code>include</code>和<code>exclude</code>属性，两者都支持字符串或正则表达式，<code>include</code>表示只有名称匹配的组件会被缓存，<code>exclude</code>表示任何名称匹配的组件都不会被缓存，其中<code>exclude</code>的优先级比<code>include</code>高；</li>
<li>对应两个钩子函数<code>activated</code>和<code>deactivated</code>，当组件被激活时，触发钩子函数<code>activated</code>，当组件被移除时，触发钩子函数<code>deactivated</code>。</li>
</ul>
<h4 id="10-v-model的原理"><a href="#10-v-model的原理" class="headerlink" title="10.v-model的原理"></a><strong>10.<code>v-model</code>的原理</strong></h4><p>在<code>vue</code>项目中主要使用<code>v-model</code>指令在表单<code>input</code>、<code>textarea</code>、<code>select</code>等元素上创建双向数据绑定，我们知道<code>v-model</code>本质上不过是语法糖，<code>v-model</code>在内部为不同的输入元素使用不同的属性并抛出不同的事件：</p>
<ul>
<li><code>text</code>和<code>textarea</code>元素使用<code>value</code>属性和<code>input</code>事件；</li>
<li><code>checkbox</code>和<code>radio</code>使用<code>checked</code>属性和<code>change</code>事件；</li>
<li><code>select</code>字段将<code>value</code>作为<code>prop</code>并将<code>change</code>作为事件。</li>
</ul>
<p>以<code>input</code>表单元素为例：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt; input v-model=<span class="string">&quot;something&quot;</span> /&gt;</span><br><span class="line"><span class="comment">// 相当于</span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">v-bind:value</span>=<span class="string">&quot;something&quot;</span> <span class="attr">v-on:input</span>=<span class="string">&quot;something = $event.target.value&quot;</span> /&gt;</span></span></span><br></pre></td></tr></table></figure>

<p>如果在自定义组件中，<code>v-model</code>默认会利用名为<code>value</code>的<code>prop</code>和名为<code>input</code>的事件，如下所示：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 父组件</span></span><br><span class="line">&lt;<span class="title class_">ModelChild</span> v-model=<span class="string">&quot;message&quot;</span>&gt;&lt;/<span class="title class_">ModelChild</span>&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 子组件</span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;&#123;value&#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="attr">props</span>:&#123;</span><br><span class="line">	<span class="attr">value</span>: <span class="title class_">String</span></span><br><span class="line">&#125;,</span><br><span class="line"><span class="attr">methods</span>: &#123;</span><br><span class="line">  <span class="title function_">test1</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="variable language_">this</span>.$emit(<span class="string">&#x27;input&#x27;</span>,<span class="string">&#x27;小红&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="11-Vue组件间通信有哪几种方式"><a href="#11-Vue组件间通信有哪几种方式" class="headerlink" title="11.Vue组件间通信有哪几种方式"></a><strong>11.<code>Vue</code>组件间通信有哪几种方式</strong></h4><p><code>Vue</code>组件间通信主要有：父子组件通信、隔代组件通信、兄弟组件通信</p>
<ol>
<li><p><code>prop / $emit</code>适用 <strong>父子组件通信</strong></p>
</li>
<li><p><code>ref</code>与 <code>$parent</code>&#x2F; <code>$children</code>适用 <strong>父子组件通信</strong></p>
<p><code>ref</code>：如果在普通的<code>DOM</code>元素上使用，引用者向的就是<code>DOM</code>元素；如果用在子组件上，引用的就是指向组件实例</p>
<p><code>$parent</code>&#x2F; <code>$children</code>：访问父 &#x2F; 子实例</p>
</li>
<li><p><code>EventBus</code>（<code>$emit</code>&#x2F;<code>$on</code>）适用于<strong>父子，隔代，兄弟组件通信</strong></p>
<p>这种方法通过一个空的<code>Vue</code>实例作为中央事件总线（事件中心），用它来触发事件和监听事件，从二实现任何组件间的通信，包括父子、隔代、兄弟组件</p>
</li>
<li><p><code>$attrs</code>&#x2F;<code>$listeners</code>适用于<strong>隔代组件通信</strong></p>
<p><code>$attrs</code>: 包含了父作用域中不被<code>prop</code>所设别（且获取）的特性绑定（<code>class</code>和<code>style</code>除外）。当一个组件没有声明任何<code>prop</code>时，这里会包含所有父作用域的绑定（<code>class</code>和<code>style</code>除外），并且可以通过<code>v-bind=&quot;$attrs&quot;</code>传入内部组件。通常配合<code>inheritAttrs</code>选项一起使用。</p>
<p><code>$listeners</code>：包含了父作用域中的（不含<code>.native</code>修饰器）<code>v-on</code>事件监听器。它可以通过<code>v-on=&quot;$listeners&quot;传入内部组件</code></p>
</li>
<li><p><code>provide</code>&#x2F;<code>inject</code>适用于<strong>隔代组件通信</strong></p>
<p>祖先组件中通过<code>provider</code>来提供变量，然后在子孙组件中通过<code>inject</code>来注入变量。<code>provide</code>&#x2F;<code>inject API</code>主要解决了跨级组件间的通信问题，不过它的使用场景，主要是子组件获取上级组件的状态，跨级组件间建立了一种主动提供与依赖注入的关系</p>
</li>
<li><p><code>Vuex</code>适用于<strong>父子、隔代、兄弟组件通信</strong></p>
<p><code>Vuex</code>是一个专门为<code>Vue.js</code>应用程序开发的状态管理模式。每一个<code>Vuex</code>应用的核心就是<code>store</code>（仓库）。<code>store</code>基本就是一个容器，它包含着应用中大部分的状态（<code>state</code>）</p>
<ul>
<li><code>Vuex</code>的状态存储是响应式的。当<code>Vue</code>组件从<code>store</code>中读取状态的时候，若<code>store</code>中的状态发生变化，那么相应的组件也会高效更新。</li>
<li>改变<code>store</code>中的状态的唯一途径就是显示地提交（<code>commit</code>）<code>mutation</code>。这样使得我们可以方便地追踪每一个状态的变化。</li>
</ul>
</li>
</ol>
<h4 id="12-你用过Vuex吗？"><a href="#12-你用过Vuex吗？" class="headerlink" title="12.你用过Vuex吗？"></a><strong>12.你用过<code>Vuex</code>吗？</strong></h4><p><code>Vuex</code>是一个专门为<code>Vue.js</code>应用程序开发的状态管理模式。每一个<code>Vuex</code>应用的核心就是<code>store</code>（仓库）。<code>store</code>基本就是一个容器，它包含着应用中大部分的状态（<code>state</code>）</p>
<ol>
<li><code>Vuex</code>的状态存储是响应式的。当<code>Vue</code>组件从<code>store</code>中读取状态的时候，若<code>store</code>中的状态发生变化，那么相应的组件也会高效更新。</li>
<li>改变<code>store</code>中的状态的唯一途径就是显示地提交（<code>commit</code>）<code>mutation</code>。这样使得我们可以方便地追踪每一个状态的变化。</li>
</ol>
<p>主要包含以下几个模块：</p>
<ul>
<li><code>State</code>：定义了应用状态的数据结构，可以在这里设置默认的初始状态。</li>
<li><code>Getter</code>：允许组件从<code>Store</code>中获取数据，<code>mapGetters</code>辅助函数仅仅是将<code>store</code>中的<code>getter</code>映射到局部计算属性。</li>
<li><code>Motation</code>：是唯一更改<code>store</code>中状态的方法，且必须是同步函数。</li>
<li><code>Action</code>：用于提交<code>mutation</code>，而不是直接变更状态，可以包含任意异步操作。</li>
<li><code>Module</code>：允许将单一的<code>Store</code>拆分为多个<code>store</code>且同时保存在单一的状态中。</li>
</ul>
<h4 id="13-Vue是如何实现数据双向绑定的？"><a href="#13-Vue是如何实现数据双向绑定的？" class="headerlink" title="13.Vue是如何实现数据双向绑定的？"></a><strong>13.<code>Vue</code>是如何实现数据双向绑定的？</strong></h4><p><code>Vue</code>主要通过以下<strong>4</strong>步骤来实现数据双向绑定的：</p>
<ul>
<li>实现一个监听器<code>Observer</code>：对数据对象进行遍历，包括子属性对象的属性，利用<code>Object.defineProperty()</code>对属性都加上<code>setter</code>和<code>getter</code>。这样的话，给这个对象的某个值赋值，就会触发<code>setter</code>，那么就能监听到了数据变化。</li>
<li>实现一个解析器<code>Compile</code>：解析<code>Vue</code>模板指令，将模版中的变量替换成数据，然后初始化渲染页面视图，并将每个指令对应的节点绑定更新函数，添加监听数据的订阅者，一旦数据有变动，收到通知，调用更新函数进行数据更新。</li>
<li>实现一个订阅者<code>Watcher</code>：<code>Watcher</code>订阅者是<code>Observer</code>和<code>Compile</code>之间的通信桥梁，主要的任务是订阅<code>Observer</code>中的属性值变化的消息，当收到属性变化的消息时，触发解析器<code>Compile</code>中对应的更新函数。</li>
<li>实现一个订阅器<code>Dep</code>：订阅器采用<strong>发布-订阅</strong>设计模式，用来收集订阅者<code>Watcher</code>，对监听器<code>Observer</code>和订阅者<code>Watcher</code>进行统一管理。</li>
</ul>
<h4 id="14-Vue框架怎么实现对象和数组的监听？"><a href="#14-Vue框架怎么实现对象和数组的监听？" class="headerlink" title="14.Vue框架怎么实现对象和数组的监听？"></a><strong>14.<code>Vue</code>框架怎么实现对象和数组的监听？</strong></h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Observe a list of Array items.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">observeArray (<span class="attr">items</span>: <span class="title class_">Array</span>&lt;any&gt;) &#123;</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>, l = items.<span class="property">length</span>; i &lt; l; i++) &#123;</span><br><span class="line">  	<span class="title function_">observe</span>(items[i])  <span class="comment">// observe 功能为监测数据的变化</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 对属性进行递归遍历</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"> <span class="keyword">let</span> childOb = !shallow &amp;&amp; <span class="title function_">observe</span>(val) <span class="comment">// observe 功能为监测数据的变化</span></span><br></pre></td></tr></table></figure>

<p><code>Vue</code>框架通过遍历数组和递归遍历对象，从而达到利用<code>Object.difineProperty()</code>也能对对象和数组（部分方法的操作）进行监听。</p>
<h4 id="15-Proxy与Object-defineProperty优劣对比"><a href="#15-Proxy与Object-defineProperty优劣对比" class="headerlink" title="15.Proxy与Object.defineProperty优劣对比"></a><strong>15.<code>Proxy</code>与<code>Object.defineProperty</code>优劣对比</strong></h4><p><code>Proxy</code>的优势如下：</p>
<ul>
<li><code>Proxy</code>可以直接监听对象和非属性；</li>
<li><code>Proxy</code>可以直接监听数组的变化；</li>
<li><code>Proxy</code>有多达13种拦截方法啊，不限于<code>appley、</code>ownKeys<code>、</code>delectProperty<code>、</code>has<code>等等是</code>Object.defineProperty&#96;不具备的；</li>
<li><code>Proxy</code>返回的是一个新对象，我们可以只操作新对象而达到目的，而<code>Object.defineProperty</code>只能遍历对象属性直接修改；</li>
<li><code>Proxy</code>作为新标准受到浏览器厂商重点持续的性能优化，也就是传说中的新标准的性能红利。</li>
</ul>
<p><code>Object.defineProperty</code>的优势如下：</p>
<ul>
<li>兼容性好，支持<code>IE9</code>，而<code>Proxy</code>存在浏览器兼容性问题，而且无法利用<code>polyfill</code>磨平。</li>
</ul>
<h4 id="15-虚拟DOM的实现原理"><a href="#15-虚拟DOM的实现原理" class="headerlink" title="15.虚拟DOM的实现原理?"></a><strong>15.虚拟<code>DOM</code>的实现原理?</strong></h4><ul>
<li>用<code>javascript</code>对象模拟真实的<code>DOM</code>树，对真实的<code>DOM</code>进行抽象；</li>
<li><code>diff</code>算法 – 比较两颗虚拟<code>DOM</code>树的差异；</li>
<li><code>pach</code>算法 – 将两个虚拟<code>DOM</code>对象的差异应用到真正的<code>DOM</code>树</li>
</ul>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/10/23/%E8%B7%A8%E5%9F%9F/"/>

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="哧溜"/>
      <meta itemprop="description" content=""/>
      <meta itemprop="image" content="/images/avatar.gif"/>
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="my blog!"/>
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2020/10/23/%E8%B7%A8%E5%9F%9F/" class="post-title-link" itemprop="url">跨域</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2020-10-23 15:40:07 / Modified: 17:11:54" itemprop="dateCreated datePublished" datetime="2020-10-23T15:40:07+08:00">2020-10-23</time>
            

            
              

              
            
          </span>

          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="什么是跨域"><a href="#什么是跨域" class="headerlink" title="什么是跨域"></a>什么是跨域</h4><p>跨域是指一个域下的文档或脚本试图去请求另一个域下的资源。</p>
<p>在前端领域，跨域是指浏览器允许向服务器发送跨域请求，从而克服Ajax只能同源使用的局限</p>
<p>####什么是同源策略</p>
<p>同源策略是一种约定，由Netscape公司1995年引入浏览器，它是浏览器最核心也是最基本的安全功能，如果缺少了同源策略，浏览器很容易受到XSS、CSFR等攻击，所谓同源是指”协议 + 域名 + 端口” 三者相同，即便两个不同的域名指向同一个ip地址，也非同源。</p>
<h5 id="同源策略限制以下几种行为"><a href="#同源策略限制以下几种行为" class="headerlink" title="同源策略限制以下几种行为"></a>同源策略限制以下几种行为</h5><ul>
<li>Cookie、LocalStorage和IndexDB无法读取</li>
<li>DOM和JS对象无法获得</li>
<li>AJAX请求不能发送</li>
</ul>
<h4 id="常用解决跨域的方法"><a href="#常用解决跨域的方法" class="headerlink" title="常用解决跨域的方法"></a>常用解决跨域的方法</h4><h5 id="JSONP"><a href="#JSONP" class="headerlink" title="JSONP"></a>JSONP</h5><p>利用<code>&lt;script&gt;</code>标签没有跨域限制的漏洞。通过<code>&lt;script&gt;</code>标签指向需要访问的地址并提供一个回调函数来接收数据</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;script src=<span class="string">&quot;http://domain/api?param1=a&amp;param2=b&amp;callback=jsonp&quot;</span>&gt;&lt;/script&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">function</span> <span class="title function_">jsonp</span>(<span class="params">data</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    	<span class="variable language_">console</span>.<span class="title function_">log</span>(data)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">	&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<p>JSONP使用简单且兼容性不错，但是只局限于<code>get</code>请求</p>
<p>JSONP封装</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">jsonp</span>(<span class="params">url, jsonpCallback, success</span>)&#123;</span><br><span class="line">  <span class="keyword">let</span> script = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;script&#x27;</span>)</span><br><span class="line">  script.<span class="property">src</span> = url</span><br><span class="line">  script.<span class="property">async</span> = <span class="literal">true</span></span><br><span class="line">  script.<span class="property">type</span> = <span class="string">&#x27;text/javascript&#x27;</span></span><br><span class="line">  <span class="variable language_">window</span>[jsonpCallback] = <span class="keyword">function</span>(<span class="params">data</span>)&#123;</span><br><span class="line">    success &amp;&amp; <span class="title function_">success</span>(data)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">appendChild</span>(script)</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">jsonp</span>(<span class="string">&#x27;http://xxxx&#x27;</span>, <span class="string">&#x27;callback&#x27;</span>, <span class="keyword">function</span>(<span class="params">value</span>)&#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(value)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h5 id="CORS"><a href="#CORS" class="headerlink" title="CORS"></a>CORS</h5><p>CORS需要浏览器和后端同时支持。IE 8 和 9 需要通过<code>XDomainRequest</code>来实现</p>
<p>浏览器会自动进行CORS通信，实现CORS通信的关键是后端。只要后端实现了CORS，就实现了跨域</p>
<p>服务端设置<code>Access-Control-Allow-Origin</code>就可以开启CORS。该属性表示哪些域名跨域访问资源，如果设置通配符则表示所有网站都跨域访问资源.</p>
<h5 id="document-domain"><a href="#document-domain" class="headerlink" title="document.domain"></a>document.domain</h5><p>该方式只能用于二级域名相同都情况下，比如<code>a.test.com</code>和<code>b.test.com</code>适用该方式。</p>
<p>只需要给页面添加<code>document.domain = &#39;test.com&#39;</code>表示二级域名都相同就可以实现跨域</p>
<h5 id="postMessage"><a href="#postMessage" class="headerlink" title="postMessage"></a>postMessage</h5><p>这种方式通常用于获取嵌入页面中的第三方页面数据。一个页面发送消息，另一个页面判断来源并接收消息</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//发送消息端</span></span><br><span class="line"><span class="variable language_">window</span>.<span class="property">parent</span>.<span class="title function_">postMessage</span>(<span class="string">&#x27;message&#x27;</span>, <span class="string">&#x27;http://test.com&#x27;</span>)</span><br><span class="line"><span class="comment">//接收消息端</span></span><br><span class="line"><span class="keyword">var</span> mc = <span class="keyword">new</span> <span class="title class_">MessageChannel</span>()</span><br><span class="line">mc.<span class="title function_">addEventListener</span>(<span class="string">&#x27;message&#x27;</span>, <span class="function"><span class="params">event</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">var</span> origin = event.<span class="property">origin</span> || event.<span class="property">originalEvent</span>.<span class="property">origin</span></span><br><span class="line">  <span class="keyword">if</span>(origin === <span class="string">&#x27;http://test.com&#x27;</span> )&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;验证通过&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>




          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/10/21/%E4%BD%9C%E7%94%A8%E5%9F%9F%E5%92%8C%E4%BD%9C%E7%94%A8%E5%9F%9F%E9%93%BE/"/>

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="哧溜"/>
      <meta itemprop="description" content=""/>
      <meta itemprop="image" content="/images/avatar.gif"/>
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="my blog!"/>
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2020/10/21/%E4%BD%9C%E7%94%A8%E5%9F%9F%E5%92%8C%E4%BD%9C%E7%94%A8%E5%9F%9F%E9%93%BE/" class="post-title-link" itemprop="url">作用域和作用域链</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2020-10-21 20:54:04" itemprop="dateCreated datePublished" datetime="2020-10-21T20:54:04+08:00">2020-10-21</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2020-10-25 13:19:21" itemprop="dateModified" datetime="2020-10-25T13:19:21+08:00">2020-10-25</time>
              
            
          </span>

          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="作用域"><a href="#作用域" class="headerlink" title="作用域"></a>作用域</h4><h5 id="1-什么是作用域"><a href="#1-什么是作用域" class="headerlink" title="1.什么是作用域"></a>1.什么是作用域</h5><p>定义变量的区域就是作用域。作用域是一套规则，用于确定在何处以及如何查找变量（标识符）。</p>
<p>作用域包括了<strong>全局作用域</strong>，<strong>函数作用域</strong>和<strong>块级作用域</strong></p>
<h5 id="2-全局作用域"><a href="#2-全局作用域" class="headerlink" title="2.全局作用域"></a>2.全局作用域</h5><ul>
<li>最外层函数和最外层函数定义外定义的变量拥有全局作用域</li>
<li>所有未定义直接赋值的变量自动声明为拥有全局作用域</li>
<li>所有window对象的属性拥有全局作用域</li>
</ul>
<h5 id="3-函数作用域"><a href="#3-函数作用域" class="headerlink" title="3.函数作用域"></a>3.函数作用域</h5><p>函数作用域指声明在函数内部的变量拥有</p>
<p><strong>作用域是分层的，内层作用域可以访问外层作用域的变量，反之则不行</strong></p>
<p><strong>块语句（{}），如 if 和 switch 条件语句或 for 和 while 循环语句，不会创建新的作用域</strong></p>
<h5 id="4-块级作用域"><a href="#4-块级作用域" class="headerlink" title="4.块级作用域"></a>4.块级作用域</h5><p>块级作用域可通过 <strong>let</strong> 和 <strong>const</strong> 声明，所声明的变量在指定的块外的作用域无法被访问</p>
<ul>
<li>声明的变量不会提升到代码块顶部</li>
<li>禁止重复声明</li>
</ul>
<h4 id="作用域链"><a href="#作用域链" class="headerlink" title="作用域链"></a>作用域链</h4><p>作用域链是一个指向变量对象的指针列表，变量对象是一个包含了执行环境中所有变量和函数的对象，作用域链的前端始终都是当前执行上下文的变量对象，末端为全局执行上下文的变量对象</p>
<p>当查找一个变量时，如果当前执行环境中没有找到，则沿着作用域链向后查找，直到找到全局作用域。</p>
<p><strong>执行上下文在调用时候确定，随时能改变；作用域在定义时候就确定，并且不会改变</strong></p>
<h4 id="执行上下文"><a href="#执行上下文" class="headerlink" title="执行上下文"></a>执行上下文</h4><ul>
<li>变量对象(VO)，包含变量、函数声明和函数的形参，该属性只能在全局上下文中访问</li>
<li>作用域链（JS采用词法作用域，也就是说变量的作用域是在定义时就决定了）</li>
<li>this</li>
</ul>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/10/20/%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2/"/>

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="哧溜"/>
      <meta itemprop="description" content=""/>
      <meta itemprop="image" content="/images/avatar.gif"/>
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="my blog!"/>
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2020/10/20/%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2/" class="post-title-link" itemprop="url">类型转换</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2020-10-20 11:40:30" itemprop="dateCreated datePublished" datetime="2020-10-20T11:40:30+08:00">2020-10-20</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2020-10-23 15:03:28" itemprop="dateModified" datetime="2020-10-23T15:03:28+08:00">2020-10-23</time>
              
            
          </span>

          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="转Boolean"><a href="#转Boolean" class="headerlink" title="转Boolean"></a>转Boolean</h4><p>在条件判断时，除了<code>undefined</code>，<code>null</code>，<code>false</code>，<code>NaN</code>，<code>&#39;&#39;</code>，<code>0</code>，<code>-0</code>，其他所有值都转换为<code>true</code>，包括所有对象</p>
<h4 id="对象转基本类型"><a href="#对象转基本类型" class="headerlink" title="对象转基本类型"></a>对象转基本类型</h4><p>对象在转基本类型时，首先会调用<code>valueOf</code>然后调用<code>toString</code>。并且这两个方法可以重写</p>
<h4 id="四则运算"><a href="#四则运算" class="headerlink" title="四则运算"></a>四则运算</h4><p>只有当加法运算时，其中一方是字符串类型，就会把另一个也转为字符串类型。其他运算只要其中一方是数字，那么另一方就转为数字。并且加法运算会触发三种类型转换：将值转换为原始值，转换为数字，转换为字符串。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span> + <span class="string">&#x27;1&#x27;</span> <span class="comment">// &#x27;11&#x27;</span></span><br><span class="line"><span class="number">2</span> * <span class="string">&#x27;2&#x27;</span> <span class="comment">// 4</span></span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>] + [<span class="number">2</span>, <span class="number">1</span>] <span class="comment">// &#x27;1,22,1&#x27;</span></span><br><span class="line"><span class="comment">// [1, 2].toString() -&gt; &#x27;1,2&#x27;</span></span><br><span class="line"><span class="comment">// [2, 1].toString() -&gt; &#x27;2,1&#x27;</span></span><br><span class="line"><span class="comment">// &#x27;1,2&#x27; + &#x27;2,1&#x27; = &#x27;1,22,1&#x27;</span></span><br></pre></td></tr></table></figure>

<p>对于加号需要注意这个表达式 <code>&#39;a&#39; + + &#39;b&#39;</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;a&#x27;</span> + + <span class="string">&#x27;b&#x27;</span> <span class="comment">// -&gt; &quot;aNaN&quot;</span></span><br><span class="line"><span class="comment">// 因为 + &#x27;b&#x27; -&gt; NaN</span></span><br><span class="line"><span class="comment">// 你也许在一些代码中看到过 + &#x27;1&#x27; -&gt; 1</span></span><br></pre></td></tr></table></figure>

<p>####<code>==</code> 操作符</p>
<p>比较运算<code>x==y</code>，其中<code>x</code>和<code>y</code>是值，产生<code>true</code>或者<code>false</code>。这样的比较按如下方式进行：</p>
<ol>
<li>若<code>Type(x)</code>与<code>Type(y)</code>相同，则<ol>
<li>若<code>Type(x)</code>为<code>Undefined</code>，返回<code>true</code> 。</li>
<li>若<code>Type(x)</code>为<code>Null</code>，返回<code>true</code>。</li>
<li>若<code>Type(x)</code>为<code>Number</code>，则<ol>
<li>若<code>x</code>为<code>NaN</code>，返回<code>false</code>。</li>
<li>若<code>y</code>为<code>NaN</code>，返回<code>false</code>。</li>
<li>若<code>x</code>与<code>y</code>为相等数值，返回<code>true</code>。</li>
<li>若<code>x</code>为<code>+0</code>且<code>y</code>为<code>-0</code>，返回<code>true</code>。</li>
<li>若<code>x</code>为<code>-0</code>且<code>y</code>为<code>+0</code>，返回<code>true</code>。</li>
<li>返回<code>false</code>。</li>
</ol>
</li>
<li>若<code>Type(x)</code>为<code>String</code>，则当<code>x</code>和<code>y</code>为完全相同的字符序列（长度相等且相同字符在相同位置）时返回<code>true</code>。否则，返回<code>false</code>。</li>
<li>若<code>Type(x)</code>为<code>Boolean</code>当<code>x</code>和<code>y</code>为同<code>true</code>或者同为<code>false</code>时返回<code>true</code>。否则返回<code>false</code>。</li>
<li>当<code>x</code>和<code>y</code>为引用同一对象时返回<code>true</code>。否则，返回<code>false</code>。</li>
</ol>
</li>
<li>若<code>x</code>为<code>null</code>且<code>y</code>为<code>undefined</code>，返回<code>true</code>。</li>
<li>若<code>x</code>为<code>undefined</code>且<code>y</code>为<code>null</code>，返回<code>true</code>。</li>
<li>若<code>Type(x)</code>为<code>Number</code>且<code>Type(y)</code>为<code>String</code>，返回<code>comparison x == ToNumber(y)</code>的结果。</li>
<li>若<code>Type(x)</code>为<code>String</code>且<code>Type(y)</code>为<code>Number</code>，返回<code>ToNumber(x) == y</code>的结果。</li>
<li>若<code>Type(x)</code>为<code>Boolean</code>，返回比较<code>ToNumber(x) == y</code>的结果。</li>
<li>若<code>Type(y)</code>为<code>Boolean</code>，返回比较<code>x == ToNumber(y)</code>的结果。</li>
<li>若<code>Type(x)</code>为<code>String</code>或<code>Number</code>，且<code>Type(y)</code>为<code>Object</code>，返回比较<code>x == ToPrimitive(y)</code>的结果。</li>
<li>若<code>Type(x)</code>为<code>Object</code>，且<code>Type(y)</code>为<code>String</code>或<code>Number</code>，返回比较<code>ToPrimitive(x) == y</code>的结果</li>
</ol>
<p><code>toPrimitive</code>就是对象转基本类型</p>
<p>例题：<code>[] == ![] // -&gt; true</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// [] 转成 true，然后取反变成 false</span></span><br><span class="line">[] == <span class="literal">false</span></span><br><span class="line"><span class="comment">// 根据第 8 条得出</span></span><br><span class="line">[] == <span class="title class_">ToNumber</span>(<span class="literal">false</span>)</span><br><span class="line">[] == <span class="number">0</span></span><br><span class="line"><span class="comment">// 根据第 10 条得出</span></span><br><span class="line"><span class="title class_">ToPrimitive</span>([]) == <span class="number">0</span></span><br><span class="line"><span class="comment">// [].toString() -&gt; &#x27;&#x27;</span></span><br><span class="line"><span class="string">&#x27;&#x27;</span> == <span class="number">0</span></span><br><span class="line"><span class="comment">// 根据第 6 条得出</span></span><br><span class="line"><span class="number">0</span> == <span class="number">0</span> <span class="comment">// -&gt; true</span></span><br></pre></td></tr></table></figure>

<p><code>number</code>&gt; <code>string</code>&gt; <code>object</code>&gt;<code>boolean</code></p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/5/">5</a><a class="extend next" rel="next" href="/page/2/">&lt;i class&#x3D;&quot;fa fa-angle-right&quot; aria-label&#x3D;&quot;Next page&quot;&gt;&lt;&#x2F;i&gt;</a>
  </nav>



          </div>
          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <div class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">哧溜</p>
              <div class="site-description motion-element" itemprop="description"></div>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/%20%7C%7C%20archive">
                
                    <span class="site-state-item-count">45</span>
                    <span class="site-state-item-name">posts</span>
                  </a>
                </div>
              

              

              
                
                
                <div class="site-state-item site-state-tags">
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">7</span>
                    <span class="site-state-item-name">tags</span>
                  
                </div>
              
            </nav>
          

          

          

          

          

          
          

          
            
          
          

        </div>
      </div>

      

      

    </div>
  </aside>
  


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2022</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">哧溜</span>

  

  
</div>


  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> v6.2.0</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme – <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> v7.1.1</div>




        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

    

    
  </div>

  

<script>
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  <script src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>


  


  <script src="/js/utils.js?v=7.1.1"></script>

  <script src="/js/motion.js?v=7.1.1"></script>



  
  


  <script src="/js/affix.js?v=7.1.1"></script>

  <script src="/js/schemes/pisces.js?v=7.1.1"></script>




  

  


  <script src="/js/next-boot.js?v=7.1.1"></script>


  

  

  

  



  




  

  

  

  

  

  

  

  

  

  

  

  

  

  

</body>
</html>
